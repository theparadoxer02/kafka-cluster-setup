# # {% for ip in "{{ groups['kafka'] | map('extract', hostvars, ['ansible_default_ipv4','address']) | list }}" %} {{ ip }} {% endfor %}

- hosts: all
  become: yes
  become_user: root
  roles:
    - Docker

  
- hosts: all
  tasks:
    - name: Start Docker Service
      script: ./start_docker_service.sh
    

- hosts: all
  tasks:
    - name: Run Zookeeper
      script: ./zookeeper.sh 172.31.19.189

- hosts: all
  tasks:
    - name: Run Kafka
      script: ./kafka.sh 3.0.209.191


- hosts: all
  tasks:
    - name: Run Schema Registry
      script: ./schema-registry.sh 172.31.0.114



- hosts: Node1
 
  tasks:
    - name: Create Kafka Topic in Node 1
      script: ./create-kafka-topic.sh 3.0.209.191


# - hosts: Node1
 
#   tasks:
#     - name: Run Kafka Connect
#       script: ./kafka-connect.sh 172.31.0.114


# - hosts: Node1
 
#   tasks:
#     - name: Create Sink Connector 10.5.48.48 10.5.48.208
#       script: ./create-sink.sh
